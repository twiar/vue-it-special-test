"use strict";(self["webpackChunkvue_it_special_test"]=self["webpackChunkvue_it_special_test"]||[]).push([[678],{1678:function(e,l,a){a.r(l),a.d(l,{default:function(){return oe}});a(7658);var t=a(3396),r=a(9242),s=a(4870),n=a(7139);const o=e=>((0,t.dD)("data-v-124a2cee"),e=e(),(0,t.Cn)(),e),u=o((()=>(0,t._)("th",null,"Действия",-1))),i={class:"text"},c={key:0,class:"image-wrapper"},v=["src"],m={style:{width:"100px"}},d={class:"actions"},p=["onClick"],g={class:"svg-icon",style:{width:"2em",height:"2em","vertical-align":"middle",fill:"currentColor",overflow:"hidden"},viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},_=o((()=>(0,t._)("path",{d:"M834.3 705.7c0 82.2-66.8 149-149 149H325.9c-82.2 0-149-66.8-149-149V346.4c0-82.2 66.8-149 149-149h129.8v-42.7H325.9c-105.7 0-191.7 86-191.7 191.7v359.3c0 105.7 86 191.7 191.7 191.7h359.3c105.7 0 191.7-86 191.7-191.7V575.9h-42.7v129.8z"},null,-1))),h=o((()=>(0,t._)("path",{d:"M889.7 163.4c-22.9-22.9-53-34.4-83.1-34.4s-60.1 11.5-83.1 34.4L312 574.9c-16.9 16.9-27.9 38.8-31.2 62.5l-19 132.8c-1.6 11.4 7.3 21.3 18.4 21.3 0.9 0 1.8-0.1 2.7-0.2l132.8-19c23.7-3.4 45.6-14.3 62.5-31.2l411.5-411.5c45.9-45.9 45.9-120.3 0-166.2zM362 585.3L710.3 237 816 342.8 467.8 691.1 362 585.3zM409.7 730l-101.1 14.4L323 643.3c1.4-9.5 4.8-18.7 9.9-26.7L436.3 720c-8 5.2-17.1 8.7-26.6 10z m449.8-430.7l-13.3 13.3-105.7-105.8 13.3-13.3c14.1-14.1 32.9-21.9 52.9-21.9s38.8 7.8 52.9 21.9c29.1 29.2 29.1 76.7-0.1 105.8z"},null,-1))),w=[_,h],y=["onClick"],f={id:"Flat",style:{width:"2em",height:"2em","vertical-align":"middle",fill:"currentColor",overflow:"hidden"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256"},k=o((()=>(0,t._)("path",{d:"M215.99609,48H176V40a24.02718,24.02718,0,0,0-24-24H104A24.02718,24.02718,0,0,0,80,40v8H39.99609a8,8,0,0,0,0,16h8V208a16.01833,16.01833,0,0,0,16,16h128a16.01833,16.01833,0,0,0,16-16V64h8a8,8,0,0,0,0-16ZM96,40a8.00917,8.00917,0,0,1,8-8h48a8.00917,8.00917,0,0,1,8,8v8H96Zm95.99609,168h-128V64h128ZM112,104v64a8,8,0,0,1-16,0V104a8,8,0,0,1,16,0Zm48,0v64a8,8,0,0,1-16,0V104a8,8,0,0,1,16,0Z"},null,-1))),b=[k];var U=(0,t.aZ)({__name:"Table",props:{columns:{},results:{},surname:{type:Boolean}},setup(e){const l=e;return(e,a)=>((0,t.wg)(),(0,t.iD)("table",null,[(0,t._)("thead",null,[(0,t._)("tr",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(l.columns,((e,a)=>((0,t.wg)(),(0,t.iD)("th",{key:a,style:(0,n.j5)(["surname"===e.key?l.surname?"":"display: none":""])},(0,n.zw)(e.title),5)))),128)),u])]),(0,t._)("tbody",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(l.results,((a,r)=>((0,t.wg)(),(0,t.iD)("tr",{key:r},[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a,((e,a)=>((0,t.wg)(),(0,t.iD)("td",{class:(0,n.C_)({hidden:!l.columns.find((e=>e.key===a))}),key:a,style:(0,n.j5)(["avatarUrl"===a?"width: 100px":"","surname"===a?l.surname?"":"display: none":""])},[(0,t._)("div",i,(0,n.zw)("avatarUrl"===a?"":e),1),"avatarUrl"===a?((0,t.wg)(),(0,t.iD)("div",c,[(0,t._)("img",{src:e,alt:"avatar"},null,8,v)])):(0,t.kq)("",!0)],6)))),128)),(0,t._)("td",m,[(0,t._)("div",d,[(0,t._)("button",{onClick:l=>e.$emit("editRow",r)},[((0,t.wg)(),(0,t.iD)("svg",g,w))],8,p),(0,t._)("button",{onClick:l=>e.$emit("deleteRow",r)},[((0,t.wg)(),(0,t.iD)("svg",f,b))],8,y)])])])))),128))])]))}}),S=a(89);const D=(0,S.Z)(U,[["__scopeId","data-v-124a2cee"]]);var C=D,x=C;const H=e=>((0,t.dD)("data-v-f778f5c0"),e=e(),(0,t.Cn)(),e),I={class:"wrapper"},V={class:"modal"},Z={class:"form-wrapper"},M={class:"form-example avatar"},z={id:"image-wrapper",class:"image-wrapper"},F=["src"],R={class:"form-example"},j=H((()=>(0,t._)("label",{for:"name"},"Имя: ",-1))),J={class:"form-example"},L=H((()=>(0,t._)("label",{for:"surname"},"Фамилия: ",-1))),N={class:"form-example"},O=H((()=>(0,t._)("label",{for:"role"},"Роль: ",-1))),Y=["disabled"],q=H((()=>(0,t._)("option",{value:""},"Выберите роль",-1))),$=H((()=>(0,t._)("option",{value:"Начальник"},"Начальник",-1))),A=H((()=>(0,t._)("option",{value:"Работник"},"Работник",-1))),B=[q,$,A],G={key:0,class:"form-example"},K=H((()=>(0,t._)("label",{for:"phone"},"Номер телефона: ",-1))),P={class:"form-example"},W=["value"];var E=(0,t.aZ)({__name:"Modal",props:{avatarUrl:{},name:{},surname:{},phone:{},role:{}},setup(e){const l=e,a=(0,s.iH)({avatarUrl:l.avatarUrl||"",name:l.name||"",surname:l.surname||"",phone:l.phone||"",role:l.role||""}),n=e=>{const l=e.target;null!==l.files&&(console.log(l.files[0]),o(l.files[0]).then((e=>{a.value.avatarUrl=String(e);let l=document.createElement("img");l.setAttribute("src",String(e)),l.style["objectFit"]="cover",l.style["width"]="100%",l.style["height"]="100%",l.style["position"]="absolute",l.style["left"]="0",l.style["right"]="0",document.querySelector("#image-wrapper")?.appendChild(l)})))},o=e=>new Promise(((l,a)=>{const t=new FileReader;t.readAsDataURL(e),t.onload=()=>l(t.result),t.onerror=e=>a(e)}));return(0,t.YP)((()=>a.value.role),((e,l)=>{"Начальник"===e&&(a.value.phone="")})),(e,s)=>((0,t.wg)(),(0,t.iD)("div",I,[(0,t._)("div",V,[(0,t._)("div",Z,[(0,t._)("div",M,[(0,t._)("div",z,[""!==l.avatarUrl&&void 0!==l.avatarUrl?((0,t.wg)(),(0,t.iD)("img",{key:0,src:l.avatarUrl,alt:"avatar"},null,8,F)):(0,t.kq)("",!0)]),(0,t._)("input",{type:"file",id:"avatar",name:"avatar",accept:"image/png, image/jpeg",onChange:n},null,32)]),(0,t._)("div",R,[j,(0,t.wy)((0,t._)("input",{type:"text",name:"name",id:"name",placeholder:"Иван","onUpdate:modelValue":s[0]||(s[0]=e=>a.value.name=e)},null,512),[[r.nr,a.value.name]])]),(0,t._)("div",J,[L,(0,t.wy)((0,t._)("input",{type:"text",name:"surname",id:"surname",placeholder:"Иванов","onUpdate:modelValue":s[1]||(s[1]=e=>a.value.surname=e)},null,512),[[r.nr,a.value.surname]])]),(0,t._)("div",N,[O,(0,t.wy)((0,t._)("select",{name:"role",id:"role","onUpdate:modelValue":s[2]||(s[2]=e=>a.value.role=e),disabled:""!==l.role&&void 0!==l.role},B,8,Y),[[r.bM,a.value.role]])]),"Начальник"===a.value.role?((0,t.wg)(),(0,t.iD)("div",G,[K,(0,t.wy)((0,t._)("input",{type:"phone",name:"phone",id:"phone",placeholder:"+7 (999) 999-99-99","onUpdate:modelValue":s[3]||(s[3]=e=>a.value.phone=e)},null,512),[[r.nr,a.value.phone]])])):(0,t.kq)("",!0),(0,t._)("div",P,[(0,t._)("input",{type:"submit",value:""!==l.role&&void 0!==l.role?"Сохранить":"Создать",onClick:s[4]||(s[4]=l=>e.$emit("getForm",a.value))},null,8,W),(0,t._)("span",{class:"button",onClick:s[5]||(s[5]=l=>e.$emit("close",!1))},"Закрыть")])])])]))}});const T=(0,S.Z)(E,[["__scopeId","data-v-f778f5c0"]]);var Q=T,X=Q,ee=a(2578);const le=(0,ee.Q_)("user",(()=>{const e=(0,s.iH)([]);return{userData:e}})),ae=e=>((0,t.dD)("data-v-d471d7b6"),e=e(),(0,t.Cn)(),e),te={class:"row"},re=ae((()=>(0,t._)("label",{for:"surname"},"Показывать фамилии",-1)));var se=(0,t.aZ)({__name:"Users",setup(e){le();const l=(0,s.iH)(!1),a=(0,s.iH)(!0),n=(0,s.iH)({}),o=(0,s.iH)({columns:[{title:"Аватар",key:"avatarUrl"},{title:"Имя",key:"name"},{title:"Фамилия",key:"surname"},{title:"Роль",key:"role"}],results:[],surname:(0,t.Fl)((()=>a.value))}),u=e=>{l.value=e},i=e=>{if(e.avatarUrl&&e.role&&e.name&&e.surname){let a=localStorage.getItem("users")?JSON.parse(localStorage.getItem("users")||"{}"):[];a.push(e),localStorage.setItem("users",JSON.stringify(a)),l.value=!1,o.value.results=localStorage.getItem("users")?JSON.parse(localStorage.getItem("users")||"{}"):[]}else{let l=[];e.avatarUrl||l.push("Аватар"),e.name||l.push("Имя"),e.surname||l.push("Фамилия"),e.role||l.push("Роль"),alert("Заполните поля: "+l.join(", "))}},c=e=>{n.value=o.value.results[e],l.value=!0},v=e=>{const l=o.value.results.filter(((l,a)=>a!==e));localStorage.setItem("users",JSON.stringify(l)),o.value.results=localStorage.getItem("users")?JSON.parse(localStorage.getItem("users")||"{}"):[]};return(0,t.YP)((()=>l.value),((e,l)=>{e||(n.value={})})),(0,t.wF)((()=>{o.value.results=localStorage.getItem("users")?JSON.parse(localStorage.getItem("users")||"{}"):[]})),(e,m)=>{const d=(0,t.up)("RouterLink");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(d,{to:"/"},{default:(0,t.w5)((()=>[(0,t.Uk)("На главную")])),_:1}),(0,t._)("div",te,[(0,t._)("button",{onClick:m[0]||(m[0]=e=>l.value=!l.value)},"Добавить пользователя"),(0,t._)("div",null,[re,(0,t.wy)((0,t._)("input",{type:"checkbox",name:"surname",id:"surname","onUpdate:modelValue":m[1]||(m[1]=e=>a.value=e)},null,512),[[r.e8,a.value]])])]),(0,t.Wm)((0,s.SU)(x),(0,t.dG)(o.value,{onDeleteRow:v,onEditRow:c}),null,16),(0,t.Wm)(r.uT,null,{default:(0,t.w5)((()=>[l.value?((0,t.wg)(),(0,t.j4)((0,s.SU)(X),(0,t.dG)({key:0,onGetForm:i,onClose:u},n.value),null,16)):(0,t.kq)("",!0)])),_:1})],64)}}});const ne=(0,S.Z)(se,[["__scopeId","data-v-d471d7b6"]]);var oe=ne}}]);
//# sourceMappingURL=678.cddc5c64.js.map